(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"36SN":function(ce,I,d){"use strict";d.r(I),d.d(I,"Column",function(){return ge}),d.d(I,"Line",function(){return ye}),d.d(I,"PivotTable",function(){return Ce});var F=d("0Owb"),M=d("PpiC"),me=d("jGLd"),pe=d("rCx4"),Z=d("q1tI"),b=d.n(Z);function $(e){var l=[],x=[];return e.forEach(t=>{t.isDim?l.push(t):x.push(t)}),{metaDim:l,metaInd:x}}function J(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:12;return+parseFloat(e==null?void 0:e.toPrecision(l))}var B=()=>b.a.createElement("div",{style:{color:"rgba(0,0,0,.85)",backgroundColor:"#fff2f0",fontSize:14,border:"1px solid #ffccc7",padding:"8px 15px"}},"\u2757\uFE0F\u4F20\u5165\u7684\u6307\u6807\u6570\u76EE\u6709\u8BEF\uFF01");function ee(e,l){var x=$(e),t=x.metaDim,a=x.metaInd;if(a.length>=1&&t.length===0){var s="type",p="value";return{xField:s,yField:p,data:l.map(u=>a.map(o=>{var E=o.id,T=o.name;return{[s]:E,[p]:u[E]}})).flat(),meta:{[s]:{formatter:u=>{var o;return((o=e.find(E=>{var T=E.id;return u===T}))===null||o===void 0?void 0:o.name)||u}}},tooltip:{formatter:u=>{var o,E=u[s],T=u[p];return{name:(o=e.find(D=>{var G=D.id;return E===G}))===null||o===void 0?void 0:o.name,value:T}}}}}else if(a.length===1&&t.length===1){var f,c,i,S=(f=t.shift())===null||f===void 0?void 0:f.id,h=(c=a.shift())===null||c===void 0?void 0:c.id;return{data:l,xField:S,yField:h,meta:{[h]:{alias:(i=e.find(u=>{var o=u.id;return o===h}))===null||i===void 0?void 0:i.name}}}}else if(a.length>1&&t.length===1){var A,N=(A=t.shift())===null||A===void 0?void 0:A.id,K="value",L="type";return{data:l.map(u=>a.map(o=>{var E=o.id,T=o.name;return{[N]:u[N],[K]:u[E],[L]:T}})).flat(),xField:N,yField:K,seriesField:L,isGroup:!0}}else if(a.length===1&&t.length===2){var j,O,C;return{data:l,xField:(j=t.shift())===null||j===void 0?void 0:j.id,yField:(O=a.shift())===null||O===void 0?void 0:O.id,seriesField:(C=t.shift())===null||C===void 0?void 0:C.id,isGroup:!0}}return{data:l,xField:"",yField:""}}var fe=e=>{var l=e.className,x=e.style,t=e.meta,a=t===void 0?[]:t,s=e.data,p=s===void 0?[]:s,f=e.inverted,c=Object(M.default)(e,["className","style","meta","data","inverted"]);if(f){var i=ee(a,p),S=i.xField,h=i.yField,A=Object(M.default)(i,["xField","yField"]);return b.a.createElement(me.a,Object(F.default)({xField:h,yField:S},A,{renderer:"svg",errorTemplate:()=>b.a.createElement(B,null)},c))}else return b.a.createElement(pe.a,Object(F.default)({},ee(a,p),{renderer:"svg",errorTemplate:()=>b.a.createElement(B,null)},c))},ge=fe,te=d("k1fw"),ae=d("sGjT"),be=d("gbv1"),Ee=d("QLmL"),xe=d("u7H3");function he(e,l){var x=$(e),t=x.metaDim,a=x.metaInd;if(a.length===1&&t.length===1){var s,p=t.shift(),f=a.shift(),c=p.id,i=f.id;return{data:l,xField:c,yField:i,yAxis:{label:{formatter:n=>f.isRate?"".concat(J(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var m=n[c],g=n[i];return{name:f.name,value:f.isRate?"".concat(J(100*Number(g)),"%"):g}}},meta:{[i]:{alias:(s=e.find(n=>{var m=n.id;return m===i}))===null||s===void 0?void 0:s.name}}}}else if(a.length===1&&t.length===2){var S=t.shift(),h=a.shift(),A=t.shift(),N=S.id,K=h.id,L=A.id;return{data:l,xField:N,yField:K,seriesField:L,yAxis:{label:{formatter:n=>h.isRate?"".concat(J(100*Number(n)),"%"):n}},tooltip:{formatter:n=>{var m=n[L],g=n[K];return{name:m,value:h.isRate?"".concat(J(100*Number(g)),"%"):g}}}}}else if(a.length===2&&t.length===2){var j,O,C,u,o=l.map(n=>{var m=a[0].id,g=t[1].id,H=n[m],V=n[g],W=Object(M.default)(n,[m,g].map(ae.a));return Object(te.a)({[t[1].id]:"".concat(V,"-").concat(a[0].name)},W)}),E=l.map(n=>{var m=a[1].id,g=t[1].id,H=n[m],V=n[g],W=Object(M.default)(n,[m,g].map(ae.a));return Object(te.a)({[t[1].id]:"".concat(V,"-").concat(a[1].name)},W)});return{data:[E,o],geometryOptions:[{geometry:"line",seriesField:t[1].id},{geometry:"line",seriesField:t[1].id,lineStyle:{lineDash:[5,5]}}],xField:(j=t.shift())===null||j===void 0?void 0:j.id,yField:[(O=a.shift())===null||O===void 0?void 0:O.id,(C=a.shift())===null||C===void 0?void 0:C.id],seriesField:(u=t.shift())===null||u===void 0?void 0:u.id}}else if(a.length>1&&t.length===1){var T,D=(T=t.shift())===null||T===void 0?void 0:T.id,G="value",Y="type";return{data:l.map(n=>a.map(m=>{var g=m.id,H=m.name;return{[D]:n[D],[G]:n[g],[Y]:H}})).flat(),xField:D,yField:G,seriesField:Y}}return{data:l}}var Te=e=>{var l=e.className,x=e.style,t=e.meta,a=t===void 0?[]:t,s=e.data,p=s===void 0?[]:s,f=e.withArea,c=Object(M.default)(e,["className","style","meta","data","withArea"]),i=he(a,p);return f?b.a.createElement(be.a,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(B,null)},c)):Array.isArray(i.yField)?b.a.createElement(Ee.a,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(B,null)},c)):b.a.createElement(xe.a,Object(F.default)({},i,{renderer:"svg",errorTemplate:()=>b.a.createElement(B,null)},c))},ye=Te,X=d("tJVT"),z=d("mA+x"),je=d("aMEK"),ze=d("ARb9"),Oe=e=>{var l=e.className,x=e.style,t=e.showSubtotal,a=t===void 0?!0:t,s=e.subtotalText,p=s===void 0?["\u603B\u8BA1","\u5C0F\u8BA1"]:s,f=e.meta,c=f===void 0?[]:f,i=e.data,S=i===void 0?[]:i,h=e.size,A=h===void 0?"middle":h,N=e.indicatorSide,K=N===void 0?"top":N,L=e.leftDimensionLength,j=L===void 0?c.length:L,O=e.leftExpandable,C=O===void 0?!1:O,u=e.topExpandable,o=u===void 0?!1:u,E=e.defaultExpandAll,T=E===void 0?!0:E,D=e.cellRender,G=Object(M.default)(e,["className","style","showSubtotal","subtotalText","meta","data","size","indicatorSide","leftDimensionLength","leftExpandable","topExpandable","defaultExpandAll","cellRender"]),Y=Object(Z.useState)([]),n=Object(X.default)(Y,2),m=n[0],g=n[1],H=Object(Z.useState)([]),V=Object(X.default)(H,2),W=V[0],Se=V[1],re=$(c),w=re.metaDim,ne=re.metaInd,k=ne.map(r=>{var v=r.id,y=r.name,R=r.isRate;return{name:y,code:v,align:"right",expression:R?"AVG(".concat(v,")"):"SUM(".concat(v,")")}}),le=w.filter((r,v)=>v<j),q=le.map(r=>{var v=r.id;return v}),Ae=Object(z.b)(S,q,{includeTopWrapper:!0,isExpand:C?r=>W.includes(r):void 0}),Re=Object(z.d)(Ae,{indicators:K==="left"?k:void 0,supportsExpand:C,expandKeys:W,onChangeExpandKeys:Se,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?p[0]||"\u603B\u8BA1":p[1]||"\u5C0F\u8BA1"}):void 0}),Ne=Object(X.default)(Re,1),de=Ne[0],ie=w.filter((r,v)=>v>=j),oe=ie.map(r=>{var v=r.id;return v}),Ke=Object(z.b)(S,oe,{includeTopWrapper:!0,isExpand:o?r=>m.includes(r):void 0}),Le=Object(z.d)(Ke,{indicators:K==="top"?k:void 0,supportsExpand:o,expandKeys:m,onChangeExpandKeys:g,generateSubtotalNode:a?r=>({position:"start",value:r.path.length===0?p[0]||"\u603B\u8BA1":p[1]||"\u5C0F\u8BA1"}):void 0}),De=Object(X.default)(Le,1),ve=De[0],Pe=Object(z.c)({data:S,leftCodes:q,topCodes:oe,aggregate:Object(je.a)(k)});return b.a.createElement("div",{style:x,className:"CR-PivotTable CR-PivotTable-".concat(A," ").concat(l||"")},b.a.createElement(z.a,Object(F.default)({defaultColumnWidth:100,leftMetaColumns:w.filter(r=>{var v=r.id;return q.includes(v)}).map(r=>{var v=r.id,y=r.name;return{code:v,name:y}}),leftTree:de.children,leftTotalNode:de,topTree:ve.children,topTotalNode:ve,getValue:(r,v)=>{var y,R=(y=Pe.get(r.data.dataKey))===null||y===void 0?void 0:y.get(v.data.dataKey);return R==null?void 0:R[v.code]},render:(r,v,y)=>{var R;if(D){var ue=v.data.dataPath,Fe=ue===void 0?[]:ue,se=y.data.dataPath,Me=se===void 0?[]:se,_={};return Fe.forEach((Q,U)=>{var P;_[(P=le[U])===null||P===void 0?void 0:P.id]=Q}),Me.forEach((Q,U)=>{var P;_[(P=ie[U])===null||P===void 0?void 0:P.id]=Q}),D(r,_,y.code)}return(R=ne.find(Q=>{var U=Q.id;return U===y.code}))!==null&&R!==void 0&&R.isRate?"".concat(J(r*100).toFixed(2),"%"):r}},G)))},Ce=Oe},ARb9:function(ce,I,d){}}]);
